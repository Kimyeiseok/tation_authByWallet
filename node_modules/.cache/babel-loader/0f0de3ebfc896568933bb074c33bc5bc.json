{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/workspace/tation_authByWallet/src/views/app-views/dashboard/wallet/IsTACApproved.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { CloseCircleTwoTone, CloseCircleOutlined, CheckCircleTwoTone, CheckCircleOutlined, LoadingOutlined } from '@ant-design/icons';\nimport { Spin, Button, Modal } from 'antd';\nimport Portis from '@portis/web3';\nimport Web3 from 'web3';\nimport { tac_contract, CoopDataAddress } from 'services/AddAndABI';\n\nconst ApprovedYes = ({\n  address\n}) => {\n  return /*#__PURE__*/_jsxDEV(Button, {\n    className: \"mb-2 bt-2\",\n    type: \"primary\",\n    icon: /*#__PURE__*/_jsxDEV(CheckCircleOutlined, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 60\n    }, this),\n    size: \"small\",\n    block: true,\n    ghost: true,\n    children: \"TAC Approved\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 6\n  }, this);\n};\n\n_c = ApprovedYes;\n\nconst ApprovedNo = ({\n  address\n}) => {\n  _s();\n\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const modalOff = () => {\n    setIsModalVisible(false);\n  };\n\n  const approveTAC = address => {\n    setIsModalVisible(true);\n    tac_contract.methods.approve(CoopDataAddress, \"10000000000000000000000\").send({\n      from: address,\n      gas: '0x102A2'\n    }).on(\"transactionHash\", function (hash) {\n      console.log(\"pending\");\n      console.log(hash);\n    }).on(\"confirmation\", function (receipt) {\n      console.log(\"confirmation\");\n      console.log(receipt);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      className: \"mb-2 bt-2\",\n      type: \"primary\",\n      icon: /*#__PURE__*/_jsxDEV(CloseCircleOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 58\n      }, this),\n      size: \"small\",\n      onClick: () => {\n        approveTAC(address);\n      },\n      danger: true,\n      block: true,\n      children: \"TAC Approval\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Approving TAC\",\n      visible: isModalVisible,\n      onCancel: modalOff,\n      maskClosable: false,\n      centered: true,\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: modalOff,\n        children: \" Cancel \"\n      }, \"Cancle\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 19\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), \"  Now Loading Portis Wallet \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ApprovedNo, \"ZFwHEtl1ZQoNaflbPbQvGOHlSaM=\");\n\n_c2 = ApprovedNo;\n\nconst IsTACApproved = () => {\n  _s2();\n\n  const userInfo = useSelector(state => state.auth.userInfo);\n  const address = userInfo.walletAddress; //const address = '0xfa96ff566084b1b9394c1838C8e7BfB1354E3BF0'\n\n  const [isApproved, setIsApproved] = useState(false);\n\n  const checkIfApproved = async address => {\n    await tac_contract.methods.allowance(address, CoopDataAddress).call().then(res => setIsApproved(res));\n  };\n\n  useEffect(() => {\n    checkIfApproved(address);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isApproved && /*#__PURE__*/_jsxDEV(Button, {\n      className: \"mb-2 bt-2\",\n      type: \"primary\",\n      size: \"small\",\n      loading: true,\n      block: true,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" TAC Appoval\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }, this), isApproved && isApproved == 0 && /*#__PURE__*/_jsxDEV(ApprovedNo, {\n      address: address\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 37\n    }, this), isApproved && isApproved > 0 && /*#__PURE__*/_jsxDEV(ApprovedYes, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 37\n    }, this)]\n  }, void 0, true);\n};\n\n_s2(IsTACApproved, \"EPcTS1/lCLo0udyYD/7gg7I1Bk8=\", false, function () {\n  return [useSelector];\n});\n\n_c3 = IsTACApproved;\nexport default IsTACApproved;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ApprovedYes\");\n$RefreshReg$(_c2, \"ApprovedNo\");\n$RefreshReg$(_c3, \"IsTACApproved\");","map":{"version":3,"sources":["/workspace/tation_authByWallet/src/views/app-views/dashboard/wallet/IsTACApproved.js"],"names":["React","useState","useEffect","useSelector","CloseCircleTwoTone","CloseCircleOutlined","CheckCircleTwoTone","CheckCircleOutlined","LoadingOutlined","Spin","Button","Modal","Portis","Web3","tac_contract","CoopDataAddress","ApprovedYes","address","ApprovedNo","isModalVisible","setIsModalVisible","modalOff","approveTAC","methods","approve","send","from","gas","on","hash","console","log","receipt","IsTACApproved","userInfo","state","auth","walletAddress","isApproved","setIsApproved","checkIfApproved","allowance","call","then","res"],"mappings":"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","sourcesContent":["import  React, {useState, useEffect} from 'react';\nimport { useSelector } from 'react-redux'\nimport { \n  CloseCircleTwoTone,\n\tCloseCircleOutlined,\n\tCheckCircleTwoTone,\n\tCheckCircleOutlined,\n\tLoadingOutlined\n} from '@ant-design/icons';\nimport { Spin, Button, Modal } from 'antd';\nimport Portis from '@portis/web3';\nimport Web3 from 'web3'\nimport {tac_contract, CoopDataAddress} from 'services/AddAndABI'\n\n\n\n\t\tconst ApprovedYes = ({address}) => {\n\n\t\t\treturn(\n\t\t\t\t <Button className=\"mb-2 bt-2\" type=\"primary\"   icon= {<CheckCircleOutlined />} size='small'  block ghost >\n\t\t\t\t\tTAC Approved\n\t\t\t\t </Button>\n\t\t\t)\n\t\t}\n\n\t\tconst ApprovedNo = ({address}) => {\n\t\t\t\n\t\t\tconst [isModalVisible, setIsModalVisible] = useState(false);\n\t\t\tconst modalOff = () => {setIsModalVisible(false);};\t\n\t\t\t\n\t\t\tconst approveTAC = (address) => {\n\t\t\t\t    setIsModalVisible(true)\n\t\t\t\t\ttac_contract.methods\n\t\t\t\t\t  .approve(CoopDataAddress, \"10000000000000000000000\")\n\t\t\t\t\t\t.send({from: address, gas: '0x102A2' })\n\t\t\t\t\t  .on(\"transactionHash\", function(hash) {\n\t\t\t\t\t\t console.log(\"pending\");\n\t\t\t\t\t\t console.log(hash)\n\t\t\t\t\t  })\n\t\t\t\t\t  .on(\"confirmation\", function(receipt) {\n\t\t\t\t\t\t console.log(\"confirmation\");\n\t\t\t\t\t\t console.log(receipt)\n\t\t\t\t\t  });\n\t\t\t\t}\n\t\t\t\n\t\t\treturn(\n\t\t\t\t<>\n\t\t\t\t <Button className=\"mb-2 bt-2\" type=\"primary\" icon= {<CloseCircleOutlined />} size='small' onClick={()=>{approveTAC(address)}} danger block>\n\t\t\t\t\tTAC Approval\n\t\t\t\t </Button>\n\t\t\t\t\t<Modal title=\"Approving TAC\" \n\t\t\t\t\t\t   visible={isModalVisible} \n\t\t\t\t\t\t   onCancel={modalOff}  \n\t\t\t\t\t\t   maskClosable={false} centered={true}\n\t\t\t\t\t\t   footer={[<Button key=\"Cancle\" onClick={modalOff}> Cancel </Button>]}\n\t\t\t\t\t>\n\t\t\t\t\t  <p><LoadingOutlined />  Now Loading Portis Wallet </p>\n\t\t\t\t\t</Modal>\n\t\t\t\t</>\n\t\t\t)\n\t\t}\n\n\n\nconst IsTACApproved = () => {\n\tconst userInfo = useSelector(state => state.auth.userInfo)\n\tconst address =  userInfo.walletAddress\n    //const address = '0xfa96ff566084b1b9394c1838C8e7BfB1354E3BF0'\n\tconst [isApproved, setIsApproved] = useState(false)\n\t\t\n\tconst checkIfApproved = async (address) => {\n\t\tawait tac_contract.methods\n\t\t  .allowance(address, CoopDataAddress)\n          .call()\n\t\t  .then(res => setIsApproved(res))\n\t}\n\n\tuseEffect(()=>{\n\tcheckIfApproved(address)\n\t},[]\n\t)\n\n  return (\n     <>\n\t  {!isApproved && \n\t   \t     <Button className=\"mb-2 bt-2\" type=\"primary\"   size='small' loading block>\n\t\t\t  <span> TAC Appoval</span>\n\t\t </Button>\n\t  }\n\t{isApproved && (isApproved== 0) && <ApprovedNo address={address}/>}\n\t{isApproved && (isApproved > 0) && <ApprovedYes />}\n     </>\n  )\n}\n\n\nexport default IsTACApproved"]},"metadata":{},"sourceType":"module"}