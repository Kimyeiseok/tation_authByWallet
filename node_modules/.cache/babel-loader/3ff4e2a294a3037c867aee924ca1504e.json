{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/workspace/tation_authByWallet/src/views/auth-views/components/ConnectToMetamask.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { singInwithPortis } from 'redux/actions/Auth'; // import { db, auth } from 'auth/FirebaseAuth';\n\nimport { Form, Input, Alert, Row, Col, Button, Card, Modal, notification } from \"antd\";\nimport { GitlabOutlined, ThunderboltTwoTone, LoadingOutlined } from '@ant-design/icons'; //import {metamaskInit} from 'services/MetamaskService'\n\nimport detectEthereumProvider from '@metamask/detect-provider';\n\nconst ConnectToMetamask = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  let currentAccount = null;\n\n  const showModal = () => {\n    setIsModalVisible(true); // metamaskInit();\n\n    getAccount();\n  };\n\n  const handleAccountsChanged = accounts => {\n    if (accounts.length === 0) {\n      // MetaMask is locked or the user has not connected any accounts\n      window.ethereum.enable().catch(err => {\n        err.code == -32002 && notification.warning({\n          message: 'Notification',\n          description: '메타마스크 지갑에 로그인 해주세요',\n          placement: 'topRight'\n        });\n      });\n    } else if (accounts[0] !== currentAccount) {\n      currentAccount = accounts[0]; // Do any other work!\n\n      console.log(currentAccount);\n    }\n  };\n\n  const getAccount = async () => {\n    const provider = await detectEthereumProvider();\n\n    if (provider) {\n      window.ethereum.request({\n        method: 'eth_accounts'\n      }).then(handleAccountsChanged).catch(err => {\n        notification.warning({\n          message: 'Notification',\n          description: err,\n          placement: 'topRight'\n        });\n      });\n    } else {\n      console.log('메타마스크 설치해주세요');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `d-flex align-items-center justify-content-between mb-4`,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        icon: /*#__PURE__*/_jsxDEV(ThunderboltTwoTone, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 18\n        }, this),\n        type: \"default\",\n        block: true,\n        onClick: showModal,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"MetaMask\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Wallet Connect\",\n      visible: isModalVisible,\n      onCancel: handleCancel,\n      centered: true,\n      maskClosable: false,\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleCancel,\n        children: \" Cancel \"\n      }, \"Cancle\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 19\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 18\n        }, this), \" Connect MetaMask to TACTION to proceed\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ConnectToMetamask, \"ENqVYxPlC7FZXFc8uAXchswdtGM=\", false, function () {\n  return [useDispatch];\n});\n\n_c = ConnectToMetamask;\nexport default ConnectToMetamask;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConnectToMetamask\");","map":{"version":3,"sources":["/workspace/tation_authByWallet/src/views/auth-views/components/ConnectToMetamask.js"],"names":["React","useEffect","useState","useSelector","useDispatch","singInwithPortis","Form","Input","Alert","Row","Col","Button","Card","Modal","notification","GitlabOutlined","ThunderboltTwoTone","LoadingOutlined","detectEthereumProvider","ConnectToMetamask","dispatch","isModalVisible","setIsModalVisible","handleCancel","currentAccount","showModal","getAccount","handleAccountsChanged","accounts","length","window","ethereum","enable","catch","err","code","warning","message","description","placement","console","log","provider","request","method","then"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,gBAAT,QAAiC,oBAAjC,C,CACA;;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,KAAtB,EAA6BC,GAA7B,EAAkCC,GAAlC,EAAuCC,MAAvC,EAA+CC,IAA/C,EAAqDC,KAArD,EAA4DC,YAA5D,QAAiF,MAAjF;AACA,SAAWC,cAAX,EAA2BC,kBAA3B,EAA+CC,eAA/C,QAAqE,mBAArE,C,CACA;;AACA,OAAOC,sBAAP,MAAmC,2BAAnC;;AAEA,MAAMC,iBAAiB,GAAG,MAAM;AAAA;;AAG9B,QAAMC,QAAQ,GAAGhB,WAAW,EAA5B;AACA,QAAM,CAACiB,cAAD,EAAiBC,iBAAjB,IAAsCpB,QAAQ,CAAC,KAAD,CAApD;;AACA,QAAMqB,YAAY,GAAG,MAAM;AAACD,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AAA0B,GAAtD;;AACA,MAAIE,cAAc,GAAG,IAArB;;AAEA,QAAMC,SAAS,GAAG,MAAM;AACvBH,IAAAA,iBAAiB,CAAC,IAAD,CAAjB,CADuB,CAEpB;;AACAI,IAAAA,UAAU;AACZ,GAJF;;AAMF,QAAMC,qBAAqB,GAAIC,QAAD,IAAa;AACzC,QAAIA,QAAQ,CAACC,MAAT,KAAoB,CAAxB,EAA2B;AAC3B;AACCC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACEC,KADF,CACSC,GAAD,IAAS;AACjBA,QAAAA,GAAG,CAACC,IAAJ,IAAa,CAAC,KAAd,IACArB,YAAY,CAACsB,OAAb,CAAqB;AAClBC,UAAAA,OAAO,EAAE,cADS;AAElBC,UAAAA,WAAW,EAAE,oBAFK;AAGlBC,UAAAA,SAAS,EAAE;AAHO,SAArB,CADA;AAME,OARF;AASC,KAXF,MAWQ,IAAIX,QAAQ,CAAC,CAAD,CAAR,KAAgBJ,cAApB,EAAoC;AAC5CA,MAAAA,cAAc,GAAGI,QAAQ,CAAC,CAAD,CAAzB,CAD4C,CAE5C;;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAYjB,cAAZ;AAEE;AACF,GAlBF;;AAoBC,QAAME,UAAU,GAAG,YAAW;AAC7B,UAAMgB,QAAQ,GAAG,MAAMxB,sBAAsB,EAA7C;;AACA,QAAIwB,QAAJ,EAAc;AACbZ,MAAAA,MAAM,CAACC,QAAP,CAAgBY,OAAhB,CAAwB;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAxB,EACGC,IADH,CACQlB,qBADR,EAEGM,KAFH,CAEUC,GAAD,IAAS;AACjBpB,QAAAA,YAAY,CAACsB,OAAb,CAAqB;AAClBC,UAAAA,OAAO,EAAE,cADS;AAElBC,UAAAA,WAAW,EAAEJ,GAFK;AAGlBK,UAAAA,SAAS,EAAE;AAHO,SAArB;AAKE,OARH;AASA,KAVD,MAUK;AACJC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA;AAGD,GAjBD;;AAsBA,sBACC;AAAA,4BACE;AAAK,MAAA,SAAS,EAAG,wDAAjB;AAAA,6BACD,QAAC,MAAD;AAAQ,QAAA,IAAI,eAAE,QAAC,kBAAD;AAAA;AAAA;AAAA;AAAA,gBAAd;AAAsC,QAAA,IAAI,EAAC,SAA3C;AAAqD,QAAA,KAAK,MAA1D;AAA4D,QAAA,OAAO,EAAEhB,SAArE;AAAA,+BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADC;AAAA;AAAA;AAAA;AAAA,YADF,eAME,QAAC,KAAD;AAAO,MAAA,KAAK,EAAC,gBAAb;AACE,MAAA,OAAO,EAAEJ,cADX;AAEE,MAAA,QAAQ,EAAEE,YAFZ;AAGA,MAAA,QAAQ,EAAE,IAHV;AAGgB,MAAA,YAAY,EAAE,KAH9B;AAIK,MAAA,MAAM,EAAE,cAAC,QAAC,MAAD;AAAqB,QAAA,OAAO,EAAEA,YAA9B;AAAA;AAAA,SAAY,QAAZ;AAAA;AAAA;AAAA;AAAA,cAAD,CAJb;AAAA,6BAMU;AAAA,gCAAG,QAAC,eAAD;AAAA;AAAA;AAAA;AAAA,gBAAH;AAAA;AAAA;AAAA;AAAA;AAAA;AANV;AAAA;AAAA;AAAA;AAAA,YANF;AAAA,kBADD;AAiBA,CAzED;;GAAMJ,iB;UAGaf,W;;;KAHbe,iB;AA+EN,eAAeA,iBAAf","sourcesContent":["import React , {useEffect, useState} from \"react\";\nimport { useSelector, useDispatch } from 'react-redux'\nimport { singInwithPortis,} from 'redux/actions/Auth';\n// import { db, auth } from 'auth/FirebaseAuth';\nimport { Form, Input, Alert, Row, Col, Button, Card, Modal, notification  } from \"antd\";\nimport {   GitlabOutlined, ThunderboltTwoTone, LoadingOutlined} from '@ant-design/icons';\n//import {metamaskInit} from 'services/MetamaskService'\nimport detectEthereumProvider from '@metamask/detect-provider'\n\nconst ConnectToMetamask = () => {\n\t\n\n  const dispatch = useDispatch()\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const handleCancel = () => {setIsModalVisible(false);};\n  let currentAccount = null;\n\t \n  const showModal = () => {\n\t  setIsModalVisible(true)\n      // metamaskInit();\n      getAccount()\n\t  };\t\n\nconst handleAccountsChanged = (accounts)=> {\n\t if (accounts.length === 0) {\n\t\t// MetaMask is locked or the user has not connected any accounts\n\t\t window.ethereum.enable()\n\t\t  .catch((err) => {\n\t\t\terr.code == (-32002)&&\n\t\t\tnotification.warning({\n\t\t\t\t\t\tmessage: 'Notification',\n\t\t\t\t\t\tdescription: '메타마스크 지갑에 로그인 해주세요',\n\t\t\t\t\t\tplacement: 'topRight',\n\t\t\t\t\t  }); \n\t\t  });  \n\t  } else if (accounts[0] !== currentAccount) {\n\t\tcurrentAccount = accounts[0];\n\t\t// Do any other work!\n\t\tconsole.log(currentAccount)\n\n\t  }\n\t}\t\n\t\n const getAccount = async () =>{\n\t const provider = await detectEthereumProvider();\n\t if (provider) {\n\t\t window.ethereum.request({ method: 'eth_accounts' })\n\t\t\t  .then(handleAccountsChanged)\n\t\t\t  .catch((err) => {\n\t\t\t\tnotification.warning({\n\t\t\t\t\t\t\tmessage: 'Notification',\n\t\t\t\t\t\t\tdescription: err,\n\t\t\t\t\t\t\tplacement: 'topRight',\n\t\t\t\t\t\t  }); \n\t\t\t  });  \n\t }else{\n\t\t console.log('메타마스크 설치해주세요')\n\t }\n\t \n\t \n }\n\t\n\t\n\t\n\t\n\treturn (\n\t\t<>\n\t\t  <div className={`d-flex align-items-center justify-content-between mb-4`}>\n\t\t\t<Button icon={<ThunderboltTwoTone />} type=\"default\" block  onClick={showModal}>\n\t\t\t\t<span>MetaMask</span>\n\t\t\t</Button>\n\t\t   </div>\n\t \t\t<Modal title=\"Wallet Connect\" \n\t\t\t   visible={isModalVisible} \n\t\t\t   onCancel={handleCancel}  \n\t\t\t\tcentered={true} maskClosable={false}\n\t\t       footer={[<Button key=\"Cancle\" onClick={handleCancel}> Cancel </Button>]}\n\t\t\t>\n              <p><LoadingOutlined /> Connect MetaMask to TACTION to proceed</p>\n        \t</Modal>\n  \t\t </>\n\t)\n}\n\n\n\n\n\nexport default ConnectToMetamask"]},"metadata":{},"sourceType":"module"}