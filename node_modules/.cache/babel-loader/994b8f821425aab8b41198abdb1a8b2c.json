{"ast":null,"code":"import detectEthereumProvider from '@metamask/detect-provider';\nimport { notification } from \"antd\";\nexport const metamaskInit = async () => {\n  const provider = await detectEthereumProvider();\n  let currentAccount = null;\n\n  const handleAccountsChanged = accounts => {\n    if (accounts.length === 0) {\n      // MetaMask is locked or the user has not connected any accounts\n      window.ethereum.enable().catch(err => {\n        err.code == -32002 && notification.warning({\n          message: 'Notification',\n          description: '메타마스크 지갑에 로그인 해주세요',\n          placement: 'topRight'\n        });\n      });\n    } else if (accounts[0] !== currentAccount) {\n      currentAccount = accounts[0]; // Do any other work!\n\n      console.log(currentAccount);\n    }\n  };\n\n  const getAccount = () => {\n    ethereum.request({\n      method: 'eth_accounts'\n    }).then(handleAccountsChanged).catch(err => {\n      notification.warning({\n        message: 'Notification',\n        description: err,\n        placement: 'topRight'\n      });\n    });\n  };\n\n  if (provider) {\n    const chainId = await provider.request({\n      method: 'eth_chainId'\n    });\n    chainId == '0x1' ? getAccount() : notification.warning({\n      message: 'Notification',\n      description: '이더리움 네트워크를 메인넷으로 설정해주세요',\n      placement: 'topRight'\n    });\n  } else {\n    // if the provider is not detected, detectEthereumProvider resolves to null\n    console.error('Please install MetaMask!', error);\n    notification.warning({\n      message: 'Notification',\n      description: 'Please install MetaMask!',\n      placement: 'topRight'\n    });\n  }\n};","map":{"version":3,"sources":["/workspace/tation_authByWallet/src/services/MetamaskService.js"],"names":["detectEthereumProvider","notification","metamaskInit","provider","currentAccount","handleAccountsChanged","accounts","length","window","ethereum","enable","catch","err","code","warning","message","description","placement","console","log","getAccount","request","method","then","chainId","error"],"mappings":"AAAA,OAAOA,sBAAP,MAAmC,2BAAnC;AACA,SAAUC,YAAV,QAA+B,MAA/B;AAEA,OAAO,MAAMC,YAAY,GAAG,YAAY;AACrC,QAAMC,QAAQ,GAAG,MAAMH,sBAAsB,EAA7C;AACA,MAAII,cAAc,GAAG,IAArB;;AACA,QAAMC,qBAAqB,GAAIC,QAAD,IAAa;AAC1C,QAAIA,QAAQ,CAACC,MAAT,KAAoB,CAAxB,EAA2B;AAC3B;AACCC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACEC,KADF,CACSC,GAAD,IAAS;AACjBA,QAAAA,GAAG,CAACC,IAAJ,IAAa,CAAC,KAAd,IACAZ,YAAY,CAACa,OAAb,CAAqB;AAClBC,UAAAA,OAAO,EAAE,cADS;AAElBC,UAAAA,WAAW,EAAE,oBAFK;AAGlBC,UAAAA,SAAS,EAAE;AAHO,SAArB,CADA;AAME,OARF;AASC,KAXF,MAWQ,IAAIX,QAAQ,CAAC,CAAD,CAAR,KAAgBF,cAApB,EAAoC;AAC5CA,MAAAA,cAAc,GAAGE,QAAQ,CAAC,CAAD,CAAzB,CAD4C,CAE5C;;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAYf,cAAZ;AACE;AACF,GAjBD;;AAkBA,QAAMgB,UAAU,GAAG,MAAM;AAEzBX,IAAAA,QAAQ,CACLY,OADH,CACW;AAAEC,MAAAA,MAAM,EAAE;AAAV,KADX,EAEGC,IAFH,CAEQlB,qBAFR,EAGGM,KAHH,CAGUC,GAAD,IAAS;AACjBX,MAAAA,YAAY,CAACa,OAAb,CAAqB;AAClBC,QAAAA,OAAO,EAAE,cADS;AAElBC,QAAAA,WAAW,EAAEJ,GAFK;AAGlBK,QAAAA,SAAS,EAAE;AAHO,OAArB;AAKE,KATH;AAUK,GAZL;;AAcG,MAAId,QAAJ,EAAc;AAChB,UAAMqB,OAAO,GAAG,MAAMrB,QAAQ,CAACkB,OAAT,CAAiB;AAACC,MAAAA,MAAM,EAAE;AAAT,KAAjB,CAAtB;AACDE,IAAAA,OAAO,IAAI,KAAX,GACGJ,UAAU,EADb,GAEGnB,YAAY,CAACa,OAAb,CAAqB;AACtBC,MAAAA,OAAO,EAAE,cADa;AAEtBC,MAAAA,WAAW,EAAE,yBAFS;AAGtBC,MAAAA,SAAS,EAAE;AAHW,KAArB,CAFH;AAOA,GATG,MASG;AACL;AACAC,IAAAA,OAAO,CAACO,KAAR,CAAc,0BAAd,EAA0CA,KAA1C;AACAxB,IAAAA,YAAY,CAACa,OAAb,CAAqB;AACrBC,MAAAA,OAAO,EAAE,cADY;AAErBC,MAAAA,WAAW,EAAE,0BAFQ;AAGrBC,MAAAA,SAAS,EAAE;AAHU,KAArB;AAKD;AACE,CArDE","sourcesContent":["import detectEthereumProvider from '@metamask/detect-provider';\nimport {  notification  } from \"antd\";\n\nexport const metamaskInit = async () => {\n\t  const provider = await detectEthereumProvider();\n\t  let currentAccount = null;\n\t  const handleAccountsChanged = (accounts)=> {\n\t\t\t if (accounts.length === 0) {\n\t\t\t\t// MetaMask is locked or the user has not connected any accounts\n\t\t\t\t window.ethereum.enable()\n\t\t\t\t  .catch((err) => {\n\t\t\t\t\terr.code == (-32002)&&\n\t\t\t\t\tnotification.warning({\n\t\t\t\t\t\t\t\tmessage: 'Notification',\n\t\t\t\t\t\t\t\tdescription: '메타마스크 지갑에 로그인 해주세요',\n\t\t\t\t\t\t\t\tplacement: 'topRight',\n\t\t\t\t\t\t\t  }); \n\t\t\t\t  });  \n\t\t\t  } else if (accounts[0] !== currentAccount) {\n\t\t\t\tcurrentAccount = accounts[0];\n\t\t\t\t// Do any other work!\n\t\t\t\tconsole.log(currentAccount)\n\t\t\t  }\n\t\t\t}\n\t  const getAccount = () => {\n\t\t \n\t\t\tethereum\n\t\t\t  .request({ method: 'eth_accounts' })\n\t\t\t  .then(handleAccountsChanged)\n\t\t\t  .catch((err) => {\n\t\t\t\tnotification.warning({\n\t\t\t\t\t\t\tmessage: 'Notification',\n\t\t\t\t\t\t\tdescription: err,\n\t\t\t\t\t\t\tplacement: 'topRight',\n\t\t\t\t\t\t  }); \n\t\t\t  });  \n\t      }\n\t  \n      if (provider) {\n \t\t\tconst chainId = await provider.request({method: 'eth_chainId' })\n\t\t\tchainId == '0x1'\n\t\t\t\t? getAccount() \n\t\t\t\t: notification.warning({\n\t\t\t\t\tmessage: 'Notification',\n\t\t\t\t\tdescription: '이더리움 네트워크를 메인넷으로 설정해주세요',\n\t\t\t\t\tplacement: 'topRight',\n\t\t\t\t  });   \n\t\t} else {\n\t\t  // if the provider is not detected, detectEthereumProvider resolves to null\n\t\t  console.error('Please install MetaMask!', error)\n\t\t\t\tnotification.warning({\n\t\t\t\tmessage: 'Notification',\n\t\t\t\tdescription: 'Please install MetaMask!',\n\t\t\t\tplacement: 'topRight',\n\t\t\t  });\n\t\t}\n\t\t  }"]},"metadata":{},"sourceType":"module"}