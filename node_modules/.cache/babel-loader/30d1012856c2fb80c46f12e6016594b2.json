{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/workspace/tation_authByWallet/src/views/auth-views/components/ConnectToPortis.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from 'react-redux';\nimport { db, auth } from 'auth/FirebaseAuth';\nimport { Form, Input, Alert, Row, Col, Button, Card, Modal } from \"antd\";\nimport { GitlabOutlined, ThunderboltTwoTone, LoadingOutlined } from '@ant-design/icons'; // import Portis from '@portis/web3';\n// import Web3 from 'web3'\n// const portis = new Portis('0fccffb3-5cff-4c61-8cca-59ee4e9e9894', 'mainnet');\n// const web3 = new Web3(portis.provider);\n\nimport { portis } from 'services/PortisService';\n\nconst ConnectToPortis = () => {\n  _s();\n\n  const userInfo = useSelector(state => state.auth.userInfo);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const dbStoreAddress = async address => {\n    if (userInfo.uid) {\n      await db.collection(\"users\").doc(userInfo.uid).update({\n        address: address\n      }).then(() => {\n        console.log(\"Wallet Address successfully updated!\");\n      });\n    }\n  };\n\n  const showModal = () => {\n    setIsModalVisible(true);\n    portis.showPortis();\n  };\n\n  const portisOnLogin = () => {\n    portis.onLogin(walletAddress => {\n      dbStoreAddress(walletAddress);\n    });\n  };\n\n  useEffect(() => {\n    portisOnLogin();\n    console.log('connectToPortis.js : useEffect실행');\n    return () => {\n      console.log('connectToPortis.js : useEffect종료');\n      setIsModalVisible(false);\n    };\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `d-flex align-items-center justify-content-between mb-4`,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        icon: /*#__PURE__*/_jsxDEV(ThunderboltTwoTone, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 18\n        }, this),\n        type: \"default\",\n        block: true,\n        onClick: showModal,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Portis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Wallet Connect\",\n      visible: isModalVisible,\n      onCancel: handleCancel,\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleCancel,\n        children: \" Cancel \"\n      }, \"Cancle\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(LoadingOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 18\n        }, this), \" Connect Portis to TACTION to proceed\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ConnectToPortis, \"dw4cY+KZblv201jTr+WC+W+XRSI=\", false, function () {\n  return [useSelector];\n});\n\n_c = ConnectToPortis;\nexport default ConnectToPortis;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConnectToPortis\");","map":{"version":3,"sources":["/workspace/tation_authByWallet/src/views/auth-views/components/ConnectToPortis.js"],"names":["React","useEffect","useState","useSelector","db","auth","Form","Input","Alert","Row","Col","Button","Card","Modal","GitlabOutlined","ThunderboltTwoTone","LoadingOutlined","portis","ConnectToPortis","userInfo","state","isModalVisible","setIsModalVisible","handleCancel","dbStoreAddress","address","uid","collection","doc","update","then","console","log","showModal","showPortis","portisOnLogin","onLogin","walletAddress"],"mappings":"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","sourcesContent":["import React , {useEffect, useState} from \"react\";\nimport { useSelector } from 'react-redux'\nimport { db, auth } from 'auth/FirebaseAuth';\nimport { Form, Input, Alert, Row, Col, Button, Card, Modal  } from \"antd\";\nimport {   GitlabOutlined, ThunderboltTwoTone, LoadingOutlined} from '@ant-design/icons';\n// import Portis from '@portis/web3';\n// import Web3 from 'web3'\n\n// const portis = new Portis('0fccffb3-5cff-4c61-8cca-59ee4e9e9894', 'mainnet');\n// const web3 = new Web3(portis.provider);\nimport {portis} from 'services/PortisService'\n\nconst ConnectToPortis = () => {\n  const userInfo = useSelector(state => state.auth.userInfo)\n \n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const handleCancel = () => {setIsModalVisible(false);};\n  \n  const dbStoreAddress = async (address) => {\n\t  if(userInfo.uid){\n\t\t  await db.collection(\"users\").doc(userInfo.uid).update({\n\t\t\taddress: address\n\t\t  })\n\t\t  .then(() => {\n\t\t\tconsole.log(\"Wallet Address successfully updated!\");\n\t\t  })\n\t  }\n  }\n    \n  \n\n  const showModal = () => {\n\t  setIsModalVisible(true)\n\t  portis.showPortis()\n\t  };\t\n\t\n  const portisOnLogin = () =>{\n         portis.onLogin((walletAddress) => {\n\t\t  dbStoreAddress(walletAddress)\n        });\n  }\n\n\n  useEffect(()=>{\n   \t  portisOnLogin();\n\t  console.log('connectToPortis.js : useEffect실행');\n  return () => {\n\t  console.log('connectToPortis.js : useEffect종료');\n\t  setIsModalVisible(false)}; \n  })\t\n\t\n\treturn (\n\t\t<>\n\t\t  <div className={`d-flex align-items-center justify-content-between mb-4`}>\n\t\t\t<Button icon={<ThunderboltTwoTone />} type=\"default\" block onClick={showModal}>\n\t\t\t\t<span>Portis</span>\n\t\t\t</Button>\n\t\t   </div>\n\t \t\t<Modal title=\"Wallet Connect\" \n\t\t\t   visible={isModalVisible} \n\t\t\t   onCancel={handleCancel}  \n\t\t       footer={[<Button key=\"Cancle\" onClick={handleCancel}> Cancel </Button>]}\n\t\t\t>\n              <p><LoadingOutlined /> Connect Portis to TACTION to proceed</p>\n        \t</Modal>\n  \t\t </>\n\t)\n}\n\n\n\n\n\nexport default ConnectToPortis"]},"metadata":{},"sourceType":"module"}